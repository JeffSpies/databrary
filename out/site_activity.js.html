<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Frontend Documentation</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: site/activity.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// Generated by CoffeeScript 1.12.7

/**
 * History page display
 * @module
 */
'use strict';
app.directive('activity', [
  'constantService', function(constants) {
    return {
      restrict: 'E',
      templateUrl: 'site/activity.html',
      link: function($scope) {
        var action, activity, i, isAuthRequest, j, results;
        activity = $scope.activity;
        activity.reverse();
        $scope.idColor = function(i) {
          var hsv, sv;
          hsv = 3733 * i;
          sv = hsv / 360 | 0;
          return "hsl(" + (hsv % 360) + "," + (70 + sv % 20) + "%," + (45 + (sv / 20 | 0) % 27) + "%)";
        };
        isAuthRequest = function(act) {
          return act.type === 'authorize' &amp;&amp; act.action === 'add' &amp;&amp; act.party.id === act.user &amp;&amp; !act.site &amp;&amp; !act.member &amp;&amp; !act.old;
        };
        action = {
          add: "created",
          remove: "removed",
          change: "changed",
          superuser: "superuser",
          party: {
            add: "registered"
          },
          account: {
            add: "created account",
            attempt: "failed login",
            open: "logged in",
            close: "logged out"
          },
          authorize: {
            add: "added"
          },
          volume: {
            add: "created volume",
            change: "changed volume"
          },
          access: {
            add: "added"
          },
          preset: [
            {
              add: "shared selected information with the public",
              remove: "stopped sharing with the public"
            }, {
              add: "shared with authorized researchers",
              remove: "stopped sharing with authorized researchers"
            }
          ],
          release: {
            add: "set",
            remove: "cleared"
          },
          asset: {
            add: "uploaded"
          }
        };
        $scope.activityAction = function(act) {
          var a, at, i, ref;
          if (isAuthRequest(act)) {
            return "requested";
          }
          at = action[act.type];
          if (act.type === 'access' &amp;&amp; (i = constants.accessPreset.parties.indexOf(act.party.id)) >= 0) {
            at = action.preset[i];
          }
          a = (ref = at != null ? at[act.action] : void 0) != null ? ref : action[act.action];
          if (act.type === 'container') {
            a += ' ' + (act.top ? 'materials' : 'session');
          }
          return a;
        };
        i = 0;
        $scope.removedArray = [];
        results = [];
        while (i &lt; activity.length) {
          if (activity[i].action === "remove") {
            $scope.removedArray.push(activity[i].id);
            j = 0;
            while (j &lt; activity.length) {
              if (activity[j].id === activity[i].id &amp;&amp; activity[j].transcode) {
                $scope.removedArray.push(activity[j].transcode.id);
              }
              j++;
            }
          }
          results.push(i++);
        }
        return results;
      }
    };
  }
]);

//# sourceMappingURL=activity.js.map
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Back to Homepage</a></h2><h3>Directives</h3><ul><li><a href="module-directive_clickElsewhere.html">directive/clickElsewhere</a></li><li><a href="module-directive_form.html">directive/form</a></li><li><a href="module-site_activity.html">site/activity</a></li><li><a href="module-site_activityChange.html">site/activityChange</a></li><li><a href="module-site_commentReply.html">site/commentReply</a></li><li><a href="module-site_displayAge.html">site/displayAge</a></li><li><a href="module-site_errors.html">site/errors</a></li><li><a href="module-site_figure.html">site/figure</a></li><li><a href="module-site_frame.html">site/frame</a></li><li><a href="module-site_inputAge.html">site/inputAge</a></li><li><a href="module-site_inputCompleter.html">site/inputCompleter</a></li><li><a href="module-volume_accessGrant.html">volume/accessGrant</a></li><li><a href="module-volume_accessSearch.html">volume/accessSearch</a></li><li><a href="module-volume_assist.html">volume/assist</a></li><li><a href="module-volume_cite.html">volume/cite</a></li><li><a href="module-volume_comments.html">volume/comments</a></li><li><a href="module-volume_design.html">volume/design</a></li><li><a href="module-volume_editAccess.html">volume/editAccess</a></li><li><a href="module-volume_editFunding.html">volume/editFunding</a></li><li><a href="module-volume_editLinks.html">volume/editLinks</a></li><li><a href="module-volume_editOverview.html">volume/editOverview</a></li><li><a href="module-volume_excerpts.html">volume/excerpts</a></li><li><a href="module-volume_filter.html">volume/filter</a></li><li><a href="module-volume_fundingGrant.html">volume/fundingGrant</a></li><li><a href="module-volume_fundingSearch.html">volume/fundingSearch</a></li><li><a href="module-volume_list.html">volume/list</a></li><li><a href="module-volume_metadata.html">volume/metadata</a></li><li><a href="module-volume_meter.html">volume/meter</a></li><li><a href="module-volume_meterCanvas.html">volume/meterCanvas</a></li><li><a href="module-volume_overview.html">volume/overview</a></li><li><a href="module-volume_owners.html">volume/owners</a></li><li><a href="module-volume_pivot.html">volume/pivot</a></li><li><a href="module-volume_showInvestigators.html">volume/showInvestigators</a></li><li><a href="module-volume_slot.html">volume/slot</a></li><li><a href="module-volume_spreadsheet.html">volume/spreadsheet</a></li></ul><h3>Services</h3><ul><li><a href="analyticService.html">analyticService</a></li><li><a href="authService.html">authService</a></li><li><a href="constantService.html">constantService</a></li><li><a href="displayService.html">displayService</a></li><li><a href="messageService.html">messageService</a></li></ul><h3>Controllers</h3><ul><li><a href="site_home.html">site/home</a></li><li><a href="volume_activity.html">volume/activity</a></li><li><a href="volume_csv.html">volume/csv</a></li><li><a href="volume_edit.html">volume/edit</a></li><li><a href="volume_search.html">volume/search</a></li><li><a href="volume_slotActivity.html">volume/slotActivity</a></li><li><a href="volume_view.html">volume/view</a></li><li><a href="volume_zip.html">volume/zip</a></li></ul><h3>Functions</h3><ul><li><a href="-_anonymous_-pre-checkDirty.html">checkDirty</a></li><li><a href="-_anonymous_-pre-form.$setUnsubmitted.html">$setUnsubmitted</a></li><li><a href="-_anonymous_-pre-form.resetAll.html">resetAll</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Thu May 17 2018 12:01:00 GMT-0400 (EDT)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>

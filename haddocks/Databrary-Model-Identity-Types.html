<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Databrary.Model.Identity.Types</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Databrary-Model-Identity-Types.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Databrary-Model-Identity-Types.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">databrary-1: Databrary</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Databrary.Model.Identity.Types</p></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:Identity">Identity</a><ul class="subs"><li>= <a href="#v:NotLoggedIn">NotLoggedIn</a></li><li>| <a href="#v:IdentityNotNeeded">IdentityNotNeeded</a></li><li>| <a href="#v:Identified">Identified</a> <a href="Databrary-Model-Token-Types.html#t:Session">Session</a></li><li>| <a href="#v:ReIdentified">ReIdentified</a> <a href="Databrary-Model-Party-Types.html#t:SiteAuth">SiteAuth</a></li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:MonadHasIdentity">MonadHasIdentity</a> c m = (<a href="Databrary-Has.html#t:MonadHas">MonadHas</a> <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a> c m, <a href="Databrary-Has.html#t:Has">Has</a> <a href="Databrary-Model-Party-Types.html#t:SiteAuth">SiteAuth</a> c, <a href="Databrary-Has.html#t:Has">Has</a> <a href="Databrary-Model-Party-Types.html#t:Party">Party</a> c, <a href="Databrary-Has.html#t:Has">Has</a> (<a href="Databrary-Model-Id-Types.html#t:Id">Id</a> <a href="Databrary-Model-Party-Types.html#t:Party">Party</a>) c, <a href="Databrary-Has.html#t:Has">Has</a> <a href="Databrary-Model-Permission-Types.html#t:Access">Access</a> c)</li><li class="src short"><a href="#v:extractFromIdentifiedSessOrDefault">extractFromIdentifiedSessOrDefault</a> :: a -&gt; (<a href="Databrary-Model-Token-Types.html#t:Session">Session</a> -&gt; a) -&gt; <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a> -&gt; a</li><li class="src short"><a href="#v:identityVerf">identityVerf</a> :: <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a> -&gt; <a href="file:///nix/store/yl5m2cp3zsx9zgndv7f2q06b5w6n9vh2-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///nix/store/yl5m2cp3zsx9zgndv7f2q06b5w6n9vh2-ghc-8.0.2-doc/share/doc/ghc/html/libraries/bytestring-0.10.8.1/Data-ByteString.html#t:ByteString">ByteString</a></li><li class="src short"><a href="#v:identityAdmin">identityAdmin</a> :: <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a> -&gt; <a href="file:///nix/store/yl5m2cp3zsx9zgndv7f2q06b5w6n9vh2-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li><li class="src short"><a href="#v:identitySuperuser">identitySuperuser</a> :: <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a> -&gt; <a href="file:///nix/store/yl5m2cp3zsx9zgndv7f2q06b5w6n9vh2-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a></li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Identity" class="def">Identity</a> <a href="src/Databrary-Model-Identity-Types.html#Identity" class="link">Source</a> <a href="#t:Identity" class="selflink">#</a></p><div class="doc"><p>Who is making the request that we are handling?</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NotLoggedIn" class="def">NotLoggedIn</a></td><td class="doc"><p>User may have an identity, but they have not established it yet</p></td></tr><tr><td class="src"><a id="v:IdentityNotNeeded" class="def">IdentityNotNeeded</a></td><td class="doc"><p>We don't care what the user's identity is.
 Used mainly for BackgroundContext, but also used when
 running unprotected routes</p></td></tr><tr><td class="src"><a id="v:Identified" class="def">Identified</a> <a href="Databrary-Model-Token-Types.html#t:Session">Session</a></td><td class="doc"><p>An actual human user on a web browser. One of the other two return values
 for <code>determineIdentity</code>.</p></td></tr><tr><td class="src"><a id="v:ReIdentified" class="def">ReIdentified</a> <a href="Databrary-Model-Party-Types.html#t:SiteAuth">SiteAuth</a></td><td class="doc"><p>Speculation: used in video conversion when sending results from the
 compute cluster back to the system. Used as a <code>su</code> to run actions as the
 account who created the upload asset, instead of the anonymous account submitting the result?</p></td></tr></table></div><div class="subs instances"><p id="control.i:Identity" class="caption collapser" onclick="toggleSection('i:Identity')">Instances</p><div id="section.i:Identity" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Identity:Has:1" class="instance expander" onclick="toggleSection('i:id:Identity:Has:1')"></span> <a href="Databrary-Has.html#t:Has">Has</a> <a href="Databrary-Model-Permission-Types.html#t:Access">Access</a> <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a></span> <a href="src/Databrary-Model-Identity-Types.html#line-49" class="link">Source</a> <a href="#t:Identity" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Identity:Has:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:view">view</a> :: <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a> -&gt; <a href="Databrary-Model-Permission-Types.html#t:Access">Access</a> <a href="src/Databrary-Has.html#view" class="link">Source</a> <a href="#v:view" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Identity:Has:2" class="instance expander" onclick="toggleSection('i:id:Identity:Has:2')"></span> <a href="Databrary-Has.html#t:Has">Has</a> <a href="Databrary-Model-Party-Types.html#t:SiteAuth">SiteAuth</a> <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a></span> <a href="src/Databrary-Model-Identity-Types.html#line-37" class="link">Source</a> <a href="#t:Identity" class="selflink">#</a></td><td class="doc"><p>Get the SiteAuth for the Identity, which corresponds to what privileges the Identity has
 within the site as well which Party/Account the Identity is</p></td></tr><tr><td colspan="2"><div id="section.i:id:Identity:Has:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:view">view</a> :: <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a> -&gt; <a href="Databrary-Model-Party-Types.html#t:SiteAuth">SiteAuth</a> <a href="src/Databrary-Has.html#view" class="link">Source</a> <a href="#v:view" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Identity:Has:3" class="instance expander" onclick="toggleSection('i:id:Identity:Has:3')"></span> <a href="Databrary-Has.html#t:Has">Has</a> <a href="Databrary-Model-Party-Types.html#t:Account">Account</a> <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a></span> <a href="src/Databrary-Model-Identity-Types.html#line-45" class="link">Source</a> <a href="#t:Identity" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Identity:Has:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:view">view</a> :: <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a> -&gt; <a href="Databrary-Model-Party-Types.html#t:Account">Account</a> <a href="src/Databrary-Has.html#view" class="link">Source</a> <a href="#v:view" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Identity:Has:4" class="instance expander" onclick="toggleSection('i:id:Identity:Has:4')"></span> <a href="Databrary-Has.html#t:Has">Has</a> <a href="Databrary-Model-Party-Types.html#t:Party">Party</a> <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a></span> <a href="src/Databrary-Model-Identity-Types.html#line-43" class="link">Source</a> <a href="#t:Identity" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Identity:Has:4" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:view">view</a> :: <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a> -&gt; <a href="Databrary-Model-Party-Types.html#t:Party">Party</a> <a href="src/Databrary-Has.html#view" class="link">Source</a> <a href="#v:view" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Identity:Has:5" class="instance expander" onclick="toggleSection('i:id:Identity:Has:5')"></span> <a href="Databrary-Has.html#t:Has">Has</a> <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a> <a href="Databrary-Context.html#t:BackgroundContext">BackgroundContext</a></span> <a href="src/Databrary-Has.html#line-108" class="link">Source</a> <a href="#t:Has" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Identity:Has:5" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:view">view</a> :: <a href="Databrary-Context.html#t:BackgroundContext">BackgroundContext</a> -&gt; <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a> <a href="src/Databrary-Has.html#view" class="link">Source</a> <a href="#v:view" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Identity:Has:6" class="instance expander" onclick="toggleSection('i:id:Identity:Has:6')"></span> <a href="Databrary-Has.html#t:Has">Has</a> <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a> <a href="Databrary-Action-Types.html#t:RequestContext">RequestContext</a></span> <a href="src/Databrary-Has.html#line-88" class="link">Source</a> <a href="#t:Has" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Identity:Has:6" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:view">view</a> :: <a href="Databrary-Action-Types.html#t:RequestContext">RequestContext</a> -&gt; <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a> <a href="src/Databrary-Has.html#view" class="link">Source</a> <a href="#v:view" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Identity:Has:7" class="instance expander" onclick="toggleSection('i:id:Identity:Has:7')"></span> <a href="Databrary-Has.html#t:Has">Has</a> (<a href="Databrary-Model-Id-Types.html#t:Id">Id</a> <a href="Databrary-Model-Party-Types.html#t:Party">Party</a>) <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a></span> <a href="src/Databrary-Model-Identity-Types.html#line-47" class="link">Source</a> <a href="#t:Identity" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Identity:Has:7" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:view">view</a> :: <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a> -&gt; <a href="Databrary-Model-Id-Types.html#t:Id">Id</a> <a href="Databrary-Model-Party-Types.html#t:Party">Party</a> <a href="src/Databrary-Has.html#view" class="link">Source</a> <a href="#v:view" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:MonadHasIdentity" class="def">MonadHasIdentity</a> c m = (<a href="Databrary-Has.html#t:MonadHas">MonadHas</a> <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a> c m, <a href="Databrary-Has.html#t:Has">Has</a> <a href="Databrary-Model-Party-Types.html#t:SiteAuth">SiteAuth</a> c, <a href="Databrary-Has.html#t:Has">Has</a> <a href="Databrary-Model-Party-Types.html#t:Party">Party</a> c, <a href="Databrary-Has.html#t:Has">Has</a> (<a href="Databrary-Model-Id-Types.html#t:Id">Id</a> <a href="Databrary-Model-Party-Types.html#t:Party">Party</a>) c, <a href="Databrary-Has.html#t:Has">Has</a> <a href="Databrary-Model-Permission-Types.html#t:Access">Access</a> c) <a href="src/Databrary-Model-Identity-Types.html#MonadHasIdentity" class="link">Source</a> <a href="#t:MonadHasIdentity" class="selflink">#</a></p><div class="doc"><p>Used by an action that will reference the actor's identity in order to authorize the action being performed.
 In some cases, this identity simply hasn't been established or was not resolved because the
 context indicated that an identity wasn't needed.</p></div></div><div class="top"><p class="src"><a id="v:extractFromIdentifiedSessOrDefault" class="def">extractFromIdentifiedSessOrDefault</a> :: a -&gt; (<a href="Databrary-Model-Token-Types.html#t:Session">Session</a> -&gt; a) -&gt; <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a> -&gt; a <a href="src/Databrary-Model-Identity-Types.html#extractFromIdentifiedSessOrDefault" class="link">Source</a> <a href="#v:extractFromIdentifiedSessOrDefault" class="selflink">#</a></p><div class="doc"><p>Extract a value from part of a session for Identified, otherwise use the default value</p></div></div><div class="top"><p class="src"><a id="v:identityVerf" class="def">identityVerf</a> :: <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a> -&gt; <a href="file:///nix/store/yl5m2cp3zsx9zgndv7f2q06b5w6n9vh2-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="file:///nix/store/yl5m2cp3zsx9zgndv7f2q06b5w6n9vh2-ghc-8.0.2-doc/share/doc/ghc/html/libraries/bytestring-0.10.8.1/Data-ByteString.html#t:ByteString">ByteString</a> <a href="src/Databrary-Model-Identity-Types.html#identityVerf" class="link">Source</a> <a href="#v:identityVerf" class="selflink">#</a></p><div class="doc"><p>Extract the secure token for state changing action, only available for logged in session identity</p></div></div><div class="top"><p class="src"><a id="v:identityAdmin" class="def">identityAdmin</a> :: <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a> -&gt; <a href="file:///nix/store/yl5m2cp3zsx9zgndv7f2q06b5w6n9vh2-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Databrary-Model-Identity-Types.html#identityAdmin" class="link">Source</a> <a href="#v:identityAdmin" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:identitySuperuser" class="def">identitySuperuser</a> :: <a href="Databrary-Model-Identity-Types.html#t:Identity">Identity</a> -&gt; <a href="file:///nix/store/yl5m2cp3zsx9zgndv7f2q06b5w6n9vh2-ghc-8.0.2-doc/share/doc/ghc/html/libraries/base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="src/Databrary-Model-Identity-Types.html#identitySuperuser" class="link">Source</a> <a href="#v:identitySuperuser" class="selflink">#</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>
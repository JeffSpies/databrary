@(entity : Identity, delegated : Permission.Value)(implicit request : SiteRequest[_])

@common(entity.name) {
	<h1>@entity.name</h1>

	@if(delegated >= Permission.ADMIN) {
		<a href='@routes.Entity.admin(entity.id)'>admin</a>
	}

	<dl>

	@* This information is limited to VIEW(?) *@
	@if(request.identity.access(request.db) >= Permission.VIEW) {

	@entity.user.map { a =>
		<dt>username</dt>
		<dd>@a.username</dd>
		<dt>email</dt>
		<dd>@a.email</dd>
		@a.orcid.map { o =>
		<dt>ORCID iD</dt>
		<dd><a href="@o.uri">@o.toString</a></dd>
		}
	}

		<dt>Memberships</dt>
		@entity.authorizeParents()(request.db).map { t => 
			<dd>@displayEntity(t.parent(request.db))</dd>
		}
		<dt>Members</dt>
		@entity.authorizeChildren()(request.db).map { t => 
			<dd>@displayEntity(t.child(request.db))</dd>
		}

	}

		<dt>Studies</dt>
		@if(delegated >= Permission.CONTRIBUTE) {
			<dd>@helper.form(routes.Study.create(Some(entity.id))) {
				<button type='submit'>Create new study</button>
			}
		}
		@entity.studyAccess(Permission.CONTRIBUTE).map { a =>
			<dd>@displayStudy(a.study)</dd>
		}


	</dl>

	<h2>Comments</h2>
	<dl>
	@entity.getComments(request.db).map { c => @c.study.map { s =>
		<dt>@displayStudy(s)@c.obj.map { o =>
			&gt; @displayObject(o)
		} @c.when</dt>
		<dd>@c.text</dd>
	} }
	</dl>
}

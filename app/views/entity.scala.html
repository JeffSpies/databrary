@(entity : Entity)(implicit request : SiteRequest[_])

@common(entity.name) {
	<h1>@entity.name</h1>

	@if(Authorize.delegate_check(request.identity.id, entity.id)(request.db) >= Permission.ADMIN) {
		<a href='@routes.Entity.admin(entity.id)'>admin</a>
	}

	<dl>

	@* This information is limited to VIEW(?) *@
	@if(request.identity.access(request.db) >= Permission.VIEW) {

	@entity.account(request.db).map { a =>
		<dt>username</dt>
		<dd>@a.username</dd>
		<dt>email</dt>
		<dd>@a.email</dd>
	}

		<dt>Memberships</dt>
		@entity.authorizeParents()(request.db).map { t => 
			<dd>@displayEntity(t.parentEntity(request.db))</dd>
		}
		<dt>Members</dt>
		@entity.authorizeChildren()(request.db).map { t => 
			<dd>@displayEntity(t.childEntity(request.db))</dd>
		}

	}

		<dt>Studies</dt>
		@controllers.Study.viewable(entity.id).map { s =>
			<dd>@displayStudy(s)</dd>
		}

	</dl>
}

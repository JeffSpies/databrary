@(slot : Slot, recordForm : Option[controllers.Record.SelectForm] = None, selectList : Seq[(String,String)] = Nil)(implicit request : SiteRequest[_])

    @defining(helper.FieldConstructor(tag.tableFieldConstructor.f)) { implicit fieldConstructor =>
        <table class="records">
            <thead>
                <tr>
                    <th class="main">Record</th>
                    <th class="meta">Category</th>
                    @recordForm.map { f => <th class="meta">Action</th>}
                    </tr>
            </thead>

            <tbody>
	    @defining(Async.get(slot.records)) { records =>
            @if(records.nonEmpty) {
                @records.map { record =>
                    @tag.form(routes.Record.slotRemove(slot.volumeId, slot.id, record.id, true)) {
                        <tr>
                            <td class="main">
                                @display(record)
                                <dl class="inline-measures">
                                @Async.get(record.measures).filter(m => record.dataPermission(m.metric).checkPermission(Permission.DOWNLOAD)).map { measure =>
                                    @if(measure.metric.name != "ident") {
                                        <dt>@measure.metric.name</dt>
                                        <dd>@measure.value</dd>
                                    }

                                }
                                </dl>
                            </td>
                            <td class="meta">@record.category.fold("")(_.name)</td>
                            @recordForm.map { f =>
                                <td class="meta">
                                    <a href="@routes.Record.edit(record.volume.id, record.id)" class="button">edit</a>
                                    <button type='submit' class="button second">remove</button>
                                </td>
                            }
                        </tr>
                    }
                }
            } else {
                <tr>
                    <td class="empty" colspan="@if(recordForm.nonEmpty) {3} else {2}">There are no records assigned.</td>
                </tr>
            }
	    }
            </tbody>

            @recordForm.map { f =>
                <tfoot>
                    @tag.form(routes.Record.slotAdd(slot.volumeId, slot.id, IntId[models.RecordCategory](-500), true)) {
                        <tr>
                            @tag.select(f("record"), selectList, '_default -> "Create new record...", '_colspan -> 2)
                            <td><button type='submit' class="button first">add participant</button></td>
                        </tr>
                    }
                </tfoot>
            }
        </table>
    }

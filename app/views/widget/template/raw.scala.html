@(title : String = "The Databrary Project", toolbar: String = "", css: Html = Html(""), js: Html = Html(""))(requestOption: Option[SiteRequest[_]] = None)(body : Html)

@import play.api._
@import play.api.Play.current

<!DOCTYPE html>
<html ng-app="DatabraryModule">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <title>@title || Databrary</title>

    <!-- icons -->
    <link rel="shortcut icon" href="@routes.Assets.at("icons/favicon.png")">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="@routes.Assets.at("icons/apple-touch-icon-114x114.png")">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="@routes.Assets.at("icons/apple-touch-icon-72x72.png")">
    <link rel="apple-touch-icon-precomposed" href="@routes.Assets.at("icons/apple-touch-icon.png")">

    <!-- css -->
    <link rel="stylesheet" href="@routes.Assets.at("stylesheets/theme.min.css")">

    @if(css.body != ""){
    <style>
        @css
    </style>
    }

    <!-- js libraries -->
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.0/angular.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.0/angular-sanitize.min.js"></script>
    <script src="//ajax.googleapis.com/ajax/libs/angularjs/1.2.0/angular-animate.min.js"></script>

    <script>
        if (!window.jQuery) {
            document.write('<script src="@routes.Assets.at("javascripts/libs/jquery-1.10.2/jquery.min.js")"><\/script>');
        }

        if (!window.angular) {
            document.write('<script src="@routes.Assets.at("javascripts/libs/angular-1.2.0/angular.min.js")"><\/script>');
            document.write('<script src="@routes.Assets.at("javascripts/libs/angular-1.2.0/angular-sanitize.min.js")"><\/script>');
            document.write('<script src="@routes.Assets.at("javascripts/libs/angular-1.2.0/angular-animate.min.js")"><\/script>');
        }
    </script>

    <!-- js -->
    <script src="@routes.Assets.at("javascripts/plugins.js")"></script>
    <script src="@routes.Assets.at("javascripts/controllers.js")"></script>
    <script src="@routes.Assets.at("javascripts/main.js")"></script>

    @if(js.body != "") {
    <script>
        $(document).ready(function () {
            @js
        });
    </script>
    }
</head>

<body class="@if(Play.isDev){dev} @if(toolbar.nonEmpty){has_toolbar}">
    @widget.toolbar.databrary(requestOption)

    @if(toolbar.nonEmpty) {
        @if(toolbar == "about") {
            @widget.toolbar.about(requestOption)
        }
        @if(toolbar == "explore") {
            @widget.toolbar.explore(requestOption)
        }
        @if(toolbar == "share") {
            @widget.toolbar.share(requestOption)
        }
        @if(toolbar == "discover") {
            @widget.toolbar.discover(requestOption)
        }
    }

    <main id="main" class="main">
        @body
    </main>

    <div id="messages" class="messages" ng-controller="MessageCtrl" db-messages-manager ng-class="{messages_enabled: isEnabled()}">
        <div ng-repeat="message in messages | filter:{enabled: true}" id="{{message.id}}" class="message message_{{message.type}} message_animate" ng-class="{message_enabled: message.enabled, message_target: message.target, message_closable: message.closable}" style="z-index: {{500 - $index}};">
            <div class="wrap">
                <div class="row">
                    <div class="col-full">
                        <div class="message_close" ng-if="message.closeable" ng-click="disableMessage(message)"></div>
                        <div class="message_content" ng-bind-html="message.message"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>


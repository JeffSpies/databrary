@(volume : Volume, summary : Volume.Summary, access : Seq[VolumeAccess])(implicit request : SiteRequest[_])

@widget.panel.raw("overview", "panel_volume")(Messages("volume.overview.title")){
    <div class="col-full panel_overview_actions">
        <ul class="breadcrumbs">
        @Path(volume).toHtml
        </ul>

        <ul class="actions">
	        <li><a href="@volume.pageURL">view</a></li>
	    @if(volume.checkPermission(Permission.EDIT)) {
	        <li><a href="@controllers.routes.VolumeHtml.edit(volume.id)">edit</a></li>
	        <li><a href="@controllers.routes.AssetHtml.create(volume.id)">add file</a></li>
	        <li><a href="@controllers.routes.SlotHtml.createContainer(volume.id)">add session/folder</a></li>
	    }
	    @if(volume.checkPermission(Permission.ADMIN)) {
	        <li><a href="@controllers.routes.VolumeHtml.admin(volume.id)">access</a></li>
	    }
        </ul>
    </div>

    @widget.figure.thumbVolume(volume, classes = "panel_overview_thumbnail")

    <h1 class="col-full panel_title">@display.formatTitle(volume.name)</h1>
    @volume.alias.map { a =>
    <h2 class="col-full">@a</h2>
    }

    @widget.frame.raw("people", "")(Messages("volume.admins.title")) {
	@access.takeWhile(_.access >= Permission.ADMIN).map { a =>
	    @widget.portrait.verticalSmall(a.party)
	}
    }

@defining(access.filter(_.funding.isDefined)) { funding =>
@if(funding.nonEmpty) {
    @widget.frame.raw("funding", "")(Messages("volume.funding.title")) {
        @funding.map { f =>
            @widget.portrait.verticalSmallExtra(f.party, Html(f.funding.getOrElse("")))
        }
    }
}
}

@widget.frame.raw("volume", "")(Messages("volume.metadata.title")) {
    <div class="col-desktop-8 col-laptop-8 col-tablet-6 col-mobile-6">
        <div class="description">
            @volume.body.map(display.plainText _)
        </div>

        <div class="metadata">
            <dl class="flat">
                <dt>@Messages("volume.creation.title")</dt>
                <dd><time datetime="@volume.creation" pubdate>@display.dateFmtYM.print(volume.creation)</time></dd>

                <dt>@Messages("volume.sessions.title")</dt>
                <dd>@Messages("volume.sessions", summary.sessions, summary.shared)</dd>

                <dt>@Messages("volume.ages.title")</dt>
                <dd>@Messages("volume.ages", display.agerange(summary.agerange), display.age(summary.agemean))</dd>
            </dl>
        </div>
    </div>
}

    @widget.frame.raw("citation", "")(Messages("volume.citation.title")) {
	<div class="col-desktop-8 col-laptop-8 col-tablet-6 col-mobile-6">
	    <p>
	    @access.takeWhile(_.access >= Permission.ADMIN).map(a => display.citeName(a.party.name) + ", ")
	    @display.dateFmtY.print(volume.creation).
	    @volume.name.
	    <em>Databrary</em>.
	    Retrieved @display.dateFmtCite.print(new dbrary.Date) from <a href="@volume.pageURL.absoluteURL(true)" title="@volume.name on Databrary.org">http://databrary.org/volume/@volume.id</a>.
	    </p>
	</div>
    }
}

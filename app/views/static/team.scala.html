@(implicit request: SiteRequest[_])

@widget.template.static("Our Team") {
    @defining(Async.wait(Async.wait(models.Volume.get(IntId(1))).get.partyAccess)) { partyAccess =>
        <h1>The Databrary Team</h1>

        @defining(partyAccess.filter(_.access == Permission.ADMIN)) { access =>
            @if(access.nonEmpty){
                <h2>Principal Investigators</h2>

                <div class="row">
                @access.map { a =>
                    @widget.portrait.maximal(a.party)
                }
                </div>
            }
        }

        @defining(partyAccess.filter(_.access == Permission.CONTRIBUTE)) { access =>
            @if(access.nonEmpty){
                <h2>Staff</h2>

                <div class="row">
                @access.map { a =>
                    @widget.portrait.maximal(a.party)
                }
                </div>
            }
        }

        @defining(partyAccess.filter(_.access == Permission.DOWNLOAD)) { access =>
            @if(access.nonEmpty){
                <h2>Contributors</h2>

                <div class="row">
                @access.map { a =>
                    @widget.portrait.maximal(a.party)
                }
                </div>
            }
        }
    }
}

@(title : String = "", css : Html = Html(""), js : Html = Html(""))(body : Html)(implicit request : RequestObject[SitePage]#Site[_])

@script = {}

@defining(request.obj.pageActions) { actions =>
    @template.html5(title, css, script += js, Some(request)) {
        <main id="body_content" class="body_content">
            <article class="article article_crud @request.obj.getClass.getSimpleName.toLowerCase @actions.find(_.route.url.equals(request.path)).fold("")(_.name.replaceAllLiterally(" ", "-").toLowerCase)">
                @widget.panels.panel("crud_header", ""){
                    <div class="col">
                        <header class="article_header article_crud_header">
                            <h1 class="article_header_h1">@Html(request.obj.pageName.split(": ").mkString(": <br>"))</h1>

                            <nav class="article_header_nav hide-print">
                                <ul class="article_breadcrumbs flat inline-block">
                                    @Path(request.obj).toHtml
                                </ul>

                                <ul class="article_actions flat inline-block">
                                @actions.filter(_.available).map { act =>
                                    <li class="@{if(request.path == act.route.url) {"current"}}">
                                        @if(act.route.method != "GET") {
                                            @tag.form(act.route) {
                                                <button type="submit" class="link">@act.name</button>
                                            }
                                        } else {
                                            <a href="@act.route" alt="@act.name">@act.name</a>
                                        }
                                    </li>
                                }
                                </ul>
                            </nav>
                        </header>
                    </div>
                }

                @body
            </article>
        </main>
    }
}

@(post : Option[(Call, controllers.Slot.CommentForm)], comments : Seq[Comment])(implicit request : SiteRequest[_])

@import helper.FieldConstructor
    @implicitField = @{
        FieldConstructor(tag.minimalFieldConstructor.f)
    }

<section id="comments">
    <h1>Comments</h1>

    @post.map { case (post, form) =>
        @if(request.access >= Permission.VIEW) {
            <div class="comment form">
                @widget.userinfo(request.user.get)

                @tag.form(post) {
                    <div class="body">
                        @tag.textarea(form("text"), 'placeholder -> "Comment")
                        <button type="submit" class="button first">Post</button>
                    </div>
                }
		@widget.formErrors(form)
            </div>

        }
    }

    @comments.map { c =>
        <article class="comment">
            @widget.userinfo(c.who, Some(c.time))

            <div class="body">
            @display.plainText(c.text)
            </div>
        </article>
    }
</section>

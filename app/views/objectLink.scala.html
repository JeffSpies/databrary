@(link : ObjectLink)(implicit request : SiteRequest[_])

@fileData(obj : FileObject) = {
	<dt>Format</dt>
	<dd>@obj.format.name</dd>
	<dt>Consent</dt>
	<dd>@obj.consent</dd>
	@obj.date.map { date =>
	<dt>Date</dt>
	<dd>@date</dd>
	}
}

@common(link) {

	<p>@link.description</p>

	<dl>
	@link.obj(request.db) match {
	case obj : TimeseriesObject => {
		@fileData(obj)
		<dt>Duration</dt>
		<dd>@obj.duration</dd>
	}
	case obj : FileObject => {
		@fileData(obj)
	}
	case e : Excerpt => {
		<dt>Source</dt>
		<dd>???</dd>
	}
	}
	</dl>

	@if(link.permission >= Permission.EDIT) {
		<a href='@routes.Object.edit(link.containerId, link.objId)'>edit</a>
	}

	@if(link.permission >= Permission.DOWNLOAD) {
		<a href='@routes.Object.download(link.containerId, link.objId)'>download</a>
	}

	@comments(Some(routes.Comment.postObjectLink(link.containerId, link.objId)), link.comments()(request.db)) { c => 
		@display(c.who)) }
}

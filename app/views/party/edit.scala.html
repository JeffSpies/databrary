@(form : controllers.PartyHtml.PartyForm, avatarForm : controllers.PartyHtml.AvatarForm = controllers.PartyHtml.avatarForm)(implicit request : controllers.PartyHtml.Request[_])

@import helper.FieldConstructor

    @implicitField = @{
        FieldConstructor(widget.tag.labeledFieldConstructor.f)
    }

@widget.template.crud("Edit Profile: " + request.obj.pageName) {
    @widget.panel.form(request.obj.pageName, "Edit Profile") {
        <div class="col-full">
            @widget.formErrors(form)

            @widget.tag.form(routes.PartyHtml.update(request.obj.party.id)) {
                @widget.tag.inputText(form("name"), 'placeholder -> "Full name")

                @if(controllers.PartyHtml.formForAccount(form)) {
                    @widget.tag.inputPassword(form("auth"), 'placeholder -> "Current Password")
                    @widget.tag.inputText(form("email"), 'placeholder -> "Email")
                    @widget.tag.inputPassword(form("password.once"), 'placeholder -> "New Password")
                    @widget.tag.inputPassword(form("password.again"), 'placeholder -> "New Password (repeat)")
                }

                @widget.tag.inputText(form("orcid"), 'placeholder -> "ORCiD")
                @widget.tag.inputText(form("affiliation"), 'placeholder -> "Affiliation")
		@if(request.access == Permission.ADMIN) {
                    @widget.tag.inputText(form("duns"), 'placeholder -> "DUNS")
		}

                @if(controllers.PartyHtml.formForAccount(form)) {
                    @widget.tag.inputText(form("openid"), 'placeholder -> "OpenID")
                }

                <button type='submit' class="button">Update</button>
            }

	    @widget.tag.form(routes.PartyHtml.uploadAvatar(request.obj.party.id), 'enctype -> "multipart/form-data") {
		   @widget.tag.inputFile(avatarForm("file"))
		   <button type='submit' class="button">Upload</button>
	    }
            @widget.formErrors(avatarForm)
        </div>
    }
}

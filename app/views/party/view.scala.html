@(parents : Seq[Authorize], children : Seq[Authorize], accesses : Seq[VolumeAccess], funded : Seq[VolumeFunding], comments : Seq[Comment])(implicit request : controllers.PartyHtml.Request[_])

@defining(request.obj.party) { party =>
@defining(both[Seq[VolumeAccess], Seq[Volume]](accesses.span(a => a.access >= Permission.ADMIN), _.map(_.volume))) { case (owned, edited) =>
@defining(owned.flatMap(v => Async.wait(v.citations))) { citations =>
@widget.template.crud("Profile: " + request.obj.party.name) {
    @widget.panel.party(party, parents, children)

    @widget.panel.volumes(owned, edited, funded.map(_.volume))

    @widget.panel.publications(citations)

    @widget.panel.network(party, owned)

    @widget.panel.comments(None, None, comments)
}
}
}
}

@(c : Either[Volume, Slot], form : controllers.Slot.EditForm, recordForm : Option[controllers.Record.SelectForm])(implicit request : RequestObject[SitePage]#Site[_])

@import helper.FieldConstructor

@implicitField = @{
    FieldConstructor(widget.tag.minimalFieldConstructor.f)
}

@widget.template.crud(c.fold(v => "Create Session in Volume: " + v.name, s => "Edit Session: " + s.container.name + " (#" + s.id.toString + ")")) {
    @widget.formErrors(form)

    @widget.tag.form(c.fold(volume => routes.Slot.addContainer(volume.id), slot => routes.Slot.change(slot.volumeId, slot.id)), 'id -> "slot_edit") {
        @if(form("name").name) {
            @widget.tag.inputText(form("name"), 'placeholder -> "Name")
            @widget.tag.inputDate(form("date"), 'placeholder -> "Date", 'class -> "half")
        }
        @widget.enumSelect(form("consent"), Consent)
    }

    @c match {
        case Right(slot) => {
            <fieldset>
                <legend>Records</legend>

                @widget.recordAdminList(slot, recordForm)
            </fieldset>
        }
        case _ => {

        }
    }

    <button type='submit' class="big button first" form="slot_edit">Change</button>
}

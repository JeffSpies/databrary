@(slot : Slot, form : controllers.Slot.EditForm, recordForm : controllers.Record.SelectForm)(implicit request : SiteRequest[_])

@import helper.FieldConstructor

    @implicitField = @{
        FieldConstructor(tag.minimalFieldConstructor.f)
    }

@template.crud("Edit Slot: " + slot.toString) {
    <article>
        <h1>@slot.toString</h1>

	@tag.form(routes.Slot.change(slot.volumeId, slot.id)) {
		@widget.enumSelect(form("consent"), Consent)
		@tag.checkbox(form("toplevel"))
		<button type='submit' class="big button first">Change</button>
	}
	@widget.formErrors(form)

	<h2>Records</h2>
	<ul>
	@slot.records.map { record =>
		<li>@display(record):
		@tag.form(routes.Record.slotRemove(slot.volumeId, slot.id, record.id)) {
			<button type='submit'>remove</button>
		}
		</li>
	}
		<li>
		@tag.form(routes.Record.slotAdd(slot.volumeId, slot.id)) {
			@tag.select(recordForm("record"), controllers.Record.selectList(slot) :+ ("" -> "Create new record..."))
			<button type='submit'>add</button>
		}
		</li>
	</ul>

    </article>
}

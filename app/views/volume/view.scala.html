@()(implicit request: RequestObject[Volume]#Site[_])

    @script = {
	dbjs.tabs('.tabset', '.tab', '.view');
    }

@defining((request.obj, request.obj.toplevelAssets groupBy { sa =>
	if(!sa.checkPermission(Permission.DOWNLOAD)) 'o' else sa.format.mimeSubTypes._1 match {
	    case "image" => 'i'
	    case "video" => 'v'
	    case "audio" => 'a'
	    case _ => 'o'
	}
})) { case (volume, assets) =>
    @template.crud("Volume: " + volume.name, js = script) {
	@widget.panel.raw("volume_overview", ""){
	    <div class="description col-desktop-6 push-desktop-2 col-laptop-8 col-tablet-6 col-mobile-6">
		@widget.media.thumbVolume(volume)

		@widget.volumeSummary(volume)

		@volume.body.map(display.plainText _)
	    </div>
        }
    }
}

@()(implicit request: RequestObject[Volume]#Site[_])

    @script = {
	dbjs.tabs('.tabset', '.tab', '.view');
    }

@defining((request.obj, request.obj.toplevelAssets groupBy { sa =>
	if(!sa.checkPermission(Permission.DOWNLOAD)) 'o' else sa.format.mimeSubTypes._1 match {
	    case "image" => 'i'
	    case "video" => 'v'
	    case "audio" => 'a'
	    case _ => 'o'
	}
})) { case (volume, assets) =>
    @template.crud("Volume: " + volume.name, js = script) {
	@widget.panels.panel("volume_overview", ""){
	    <div class="description col-desktop-6 push-desktop-2 col-laptop-8 col-tablet-6 col-mobile-6">
		@widget.figures.thumbVolume(volume)

		@widget.volumeSummary(volume)

		@volume.body.map(display.plainText _)
	    </div>
        }

        @widget.panels.panel("volume_people", "minimizable"){
            <h2 class="panel_header minimizer col">People</h2>

            @widget.portraits.volumeAccessPortraits(volume)
        }

        @widget.panels.tags(volume.topSlot, Some(volume))
        @widget.panels.comments(Some(request.obj.topSlot), Some((routes.Slot.comment(volume.id, volume.topSlot.id), controllers.Slot.commentForm)), volume.comments)

    }
}

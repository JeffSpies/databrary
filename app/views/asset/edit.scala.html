@(target : Either[Container,ContainerAsset], form : controllers.Asset.AssetForm)(implicit request : SiteRequest[_])

@import helper.FieldConstructor

    @implicitField = @{
        FieldConstructor(tag.minimalFieldConstructor.f)
    }

@template.crud(target.fold(_ => "Upload Asset", "Edit Asset: " + _.name)) {
    <article>
	<h1>@target.fold(_ => "Upload Asset", "Edit: "+_.name)</h1>

	@tag.form(target.fold(
		container => routes.Asset.upload(container.volumeId, container.id),
		link => routes.Asset.change(link.volumeId, link.containerId, link.assetId)),
		'enctype -> "multipart/form-data") {
            @tag.inputText(form("name"), 'placeholder -> "Title", '_class -> "big")
            @tag.textarea(form("body"), 'placeholder -> "Description")
            @tag.inputText(form("offset"))

            @if(controllers.Asset.formForFile(form, target)) {
	        @widget.enumSelect(form("classification"), Classification)
	        @tag.inputFile(form("file"))
		@if(request.isAdmin) {
		  @tag.select(form("format"), (TimeseriesFormat.getAll ++ AssetFormat.getAll).map(f => (f.id.unId.toString, f.name + f.extension.fold("")("." + _))))
		  @tag.inputText(form("localfile"))
		}
            }

	    <button type='submit' class="big button first">@target.fold(_ => "Upload", _ => "Change")</button>
        }
        @widget.formErrors(form)

    </article>
}

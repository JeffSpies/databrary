<form name="volumeEditAccessForm" bindonce novalidate>
  <messages form="volumeEditAccessForm"></messages>

  <fieldset class="clean radio-set volume-edit-access-radioset" ng-disabled="!page.models.Login.checkAccess(page.permission.EDIT)" ng-form="accessGlobalForm">
    <legend bo-text="'access.global.legend' | message"></legend>

    <div class="col message message-yellow message-content" bo-if="!page.models.Login.checkAccess(page.permission.EDIT)" bo-text="'access.global.restricted' | message"></div>

    <div ng-repeat="(val, perms) in page.constants.accessGlobal">
      <input type="radio" ng-model="volumeEditAccessForm.globalVal" name="accessGlobal" ng-value="val" ng-change="volumeEditAccessForm.changeAccessGlobal()">
      <label bo-text="'access.global.'+perms.join('.') | message" class="option"></label>
    </div>
  </fieldset>

  <fieldset ng-if="volumeEditAccessForm.data.length > 0">
    <legend bo-text="'access.grant.special.legend' | message"></legend>
    <article ng-repeat="access in volumeEditAccessForm.data" class="permission-auth cf">
      <div class="row">
        <div class="col-desktop-1 col-laptop-1 col-tablet-1 col-mobile-1">
          <figure class="figure-avatar" ng-click="openAuthParent(parent)" bo-class="{inst: access.party.institution}">
            <figmedia><img ng-src="{{access.party.avatarRoute(54)}}"></figmedia>
          </figure>
        </div>

        <div class="col-desktop-11 col-laptop-8 col-tablet-5 col-mobile-4">
          <div class="row">
            <div class="permission-heading col-desktop-11 col-laptop-8 col-tablet-5 col-mobile-4">
              <a bo-href="access.party.route" class="permission-auth-username">{{access.party.name}}</a>
              <span class="permission-auth-email" bo-if="access.party.email">{{access.party.email}}</span>
            </div>

            <div class="col-desktop-11 col-laptop-8 col-tablet-5 col-mobile-4">
              <access-grant-form volume="volumeEditAccessForm.volume" access="access"></access-grant-form>
            </div>
          </div>
        </div>
      </div>
    </article>
  </fieldset>

  <fieldset scope>
    <legend bo-text="'access.search.legend' | message"></legend>
    <access-search-form volume="volumeEditAccessForm.volume"></access-search-form>
  </fieldset>

  <fieldset class="clean">
    <button ng-click="volumeEditAccessForm.saveAll()" class="green" bo-text="'save.all' | message" ng-disabled="!volumeEditAccessForm.$dirty"></button>
    <button ng-click="volumeEditAccessForm.resetAll()" class="yellow" bo-text="'revert.all' | message" ng-disabled="!volumeEditAccessForm.$dirty"></button>
  </fieldset>
</form>


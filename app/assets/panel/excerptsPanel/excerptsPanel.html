<panel ng-controller="ExcerptsPanel" id="panel-excerpts" panel-title="{{'excerpts.title' | message}}" fold bindonce>
	<div class="row">
		<div class="panel-excerpts-player col-desktop-7 col-laptop-6 col-tablet-5 col-mobile-6">
			<section ng-if="current" class="panel-excerpts-player-frame" bindonce>
				<div ng-repeat="current in [current]">
					<header>
						<a href="" ng-click="jump(current)" class="icon line jump tool" target="_self" tooltip tooltip-message="{{'excerpts.jump' | message}}"></a>
						<a ng-href="{{page.router.assetLink(current, false)}}" class="icon line download tool" target="_self" tooltip tooltip-message="{{'excerpts.download' | message}}"></a>

						<div class="classification icon line tool" bo-class="page.constants.data.classification[current.excerpt || current.asset.classification].toLowerCase()" hint="classification-{{page.constants.data.classification[current.excerpt || current.asset.classification]}}"></div>

						<h1 class="panel-excerpts-player-heading">
                                                        <img class="icon" bo-src="page.types.assetIcon(current)" hint="format-{{page.types.assetFormat(current).extension}}">
							<span bo-html="page.types.assetDisplayName(current) | format:true"></span>
						</h1>
					</header>

					<div ng-switch="getMimeGroup(current)">
						<div ng-switch-when="image">
							<img ng-src="{{page.router.assetLink(current, true)}}" style="max-width: 100%;">
						</div>

						<div ng-switch-when="video">
							<video bo-if="supported()" controls excerpt="current">
								<source ng-src="{{srcRoute}}" type="{{page.types.assetFormat(current).mimetype}}">
							</video>

							<div bo-if="!supported()" bo-html="'video.unsupported' | message"></div>
						</div>

						<div ng-switch-default></div>
					</div>
				</div>
			</section>

			&nbsp;
		</div>

		<div class="panel-excerpts-list col-desktop-8 col-laptop-6 col-tablet-4 col-mobile-6">
			<div class="row">
				<div class="col-desktop-2 col-laptop-2 col-tablet-2 col-mobile-2" ng-repeat="excerpt in volume.excerpts" bindonce>
					<div class="panel-excerpts-binder" bo-class="listClass(excerpt)">
						<div class="panel-excerpts-actions">
							<a ng-href="" ng-click="jump(excerpt)" class="icon line jump tool" target="_self" tooltip tooltip-message="{{'excerpts.jump' | message}}"></a>
						</div>

						<div ng-if="hasThumbnail(excerpt)">
                                                        <figure baseline="square" ng-click="setCurrent(excerpt)" fill>
								<figmedia>
									<img bo-src="page.router.assetThumb(excerpt)">
									<div class="panel-excerpts-video-overlay"></div>
								</figmedia>
							</figure>
						</div>

						<div ng-if="!hasThumbnail(excerpt)">
							<figure ng-click="setCurrent(excerpt)">
								<span bo-text="excerpt.asset.name"></span>
                                                                <img class="panel-excerpt-filetype-thumb" bo-src="page.types.assetIcon(excerpt)">
							</figure>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</panel>

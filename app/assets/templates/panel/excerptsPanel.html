<panel ng-controller="ExcerptsPanel" id="panel_excerpts" panel-title="{{'excerpts.title' | message}}" fold bindonce>
    <panel-mode name="view" active>
        <div class="row">
            <div class="excerpts_player col-desktop-7 col-laptop-6 col-tablet-5 col-mobile-6 col-cell">
                <section ng-if="current" class="excerpts_player_frame" bindonce>
                    <div ng-repeat="current in [current]">
                        <header>
                            <a ng-href="" ng-click="jump(current)" class="icon line jump tool" target="_self" tooltip tooltip-message="{{'excerpts.jump' | message}}"></a>
                            <a ng-href="{{router.assetLink(current, false)}}" class="icon line download tool" target="_self" tooltip tooltip-message="{{'excerpts.download' | message}}"></a>

                            <h1>
                                <span bo-html="type.assetDisplayName(current)"></span>
                            </h1>
                        </header>

                        <div ng-switch="getMimeGroup(current)">
                            <div ng-switch-when="image">
                                <img ng-src="{{router.assetLink(current, true)}}" style="max-width: 100%;">
                            </div>

                            <div ng-switch-when="video">
                                <video controls excerpt="current">
                                    <source ng-src="{{srcRoute}}" type="{{current.format.mimetype || current.asset.format.mimetype}}">
                                </video>
                            </div>

                            <div ng-switch-default></div>
                        </div>
                    </div>
                </section>

                &nbsp;
            </div>

            <div class="excerpts_list col-desktop-8 col-laptop-6 col-tablet-4 col-mobile-6 col-cell">
                <div class="row">
                    <div class="col-desktop-2 col-laptop-2 col-tablet-2 col-mobile-2 col-cell"
                         ng-repeat="excerpt in volume.excerpts" bindonce>
                        <div class="binder" bo-class="{video: (excerpt.format && excerpt.format.name == 'Video') || excerpt.asset.format.name == 'Video'}">
                            <div class="actions">
                                <a ng-href="" ng-click="jump(excerpt)" class="icon line jump tool" target="_self" tooltip tooltip-message="{{'excerpts.jump' | message}}"></a>
                            </div>

                            <figure baseline="square" ng-click="setCurrent(excerpt)">
                                <figmedia><img bo-src="router.assetThumb(excerpt)"></figmedia>
                            </figure>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </panel-mode>
</panel>

<panel ng-controller="OverviewVolumePanel" top id="panel_overview" title="Overview" ng-mouseover="hoverPanel()">
    <panel-mode name="view" active>
        <figure class="panel_overview_thumbnail" baseline="square" absolute watch="{{volume.id}}">
            <figmedia><img ng-src="/volume/{{volume.id}}/thumb"></figmedia>
        </figure>

        <h1 class="panel_title" ng-bind-html="volume.name | format:true"></h1>

        <div frame id="frame_people" title="Investigators" fold>
            <div ng-repeat="volumeAccess in volume.access | filter:{access: 4}" class="col-desktop-4 col-laptop-4 col-tablet-3 col-mobile-3 col-cell" ng-init="party = volumeAccess.party">
                <portrait hover class="portrait_vertical portrait_small"></portrait>
            </div>
        </div>

        <div frame id="frame_funding" title="Funding" fold>
            <div ng-repeat="funding in volume.access | filter:isFunding" class="col-desktop-8 col-laptop-8 col-tablet-6 col-mobile-6 col-cell" ng-init="party = funding.party">
                <portrait hover class="portrait_vertical portrait_small portrait_more" extra="{{funding.grant}}"></portrait>
            </div>
        </div>

        <div frame id="frame_metadata" title="Metadata" fold>
            <div class="col-desktop-8 col-laptop-8 col-tablet-6 col-mobile-6 col-cell">
                <div class="description" ng-bind-html="volume.body | format"></div>

                <div class="metadata">
                    <dl class="flat">
                        <dt>Data collected</dt>
                        <dd><time datetime="{{volume.creation | date:'yyyy-MM-dd HH:mm:ss Z'}}" pubdate>{{volume.creation | date:'MMMM yyyy'}}</time></dd>

                        <dt>Sessions</dt>
                        <dd>{{volume.summary.sessions}} sessions ({{volume.summary.sessions - volume.summary.shared}} unconsenting)</dd>

                        <dt ng-if="volume.summary.agemean > 0">Ages</dt>
                        <dd ng-if="volume.summary.agemean > 0">{{volume.summary.agerange[0] | age}} - {{volume.summary.agerange[1] | age}} (<em>M</em>
                            = {{volume.summary.agemean | age}})</dd>
                    </dl>
                </div>
            </div>
        </div>

        <div frame id="frame_citation" title="Citation" fold>
            <div class="col-desktop-8 col-laptop-8 col-tablet-6 col-mobile-6">
                <p ng-bind-html="volume | cite"></p>
            </div>
        </div>

        <div class="temporary">
            <a class="button mini" ng-href="{{router.volumeEdit(volume)}}">edit</a>
            <a class="button mini" ng-href="{{router.volumeAccess(volume)}}">authorize</a>
        </div>
    </panel-mode>
    <!--
    <panel-mode name="edit">
        <hgroup>
            <h1 class="panel_context">Edit Volume</h1>
            <h2 class="panel_title with_context" ng-bind-html="volume.name | format:true"></h2>
        </hgroup>

        <form name="overviewVolumeForm" class="row">
            <div class="col-desktop-8 col-laptop-8 col-tablet-6 col-mobile-6 col-cell">
                <div class="field">
                    <label for="overviewVolumeForm_name">Title</label>
                    <input type="text" id="overviewVolumeForm_name" ng-model="volumeForm.name">
                </div>

                <div class="field">
                    <label for="overviewVolumeForm_name">Description</label>
                    <textarea id="overviewVolumeForm_body" ng-model="volumeForm.body"></textarea>
                </div>


                <button type="submit" class="button second" ng-click="formSave()">Save</button>
                <button type="submit" class="button first" ng-click="formReset()">Reset</button>
            </div>
        </form>
    </panel-mode>
    -->
</panel>

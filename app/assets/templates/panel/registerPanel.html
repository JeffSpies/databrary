<panel ng-controller="RegisterPanel" top id="panel_register" panel-title="{{'register.title' | message}}">
        <div class="row">
            <hgroup class="col-full">
		<h1 class="panel_context">{{'register.title' | message}}</h1>
		<h2 class="panel_title with_context">{{'register.title.sub' | message }}</h2>
            </hgroup>

            <div class="col-full">
                <wizard retrieve="retrieveWizard" update="updateWizard" linear>
                    <wizard-step id="register_create">
                        <form name="registerForm">
                            <label for="field_name">{{'register.name.prompt' | message}}</label>
                            <input id="field_name" name="fieldName" type="text" ng-model="registerForm.data.name" ng-minlength="3">

                            <label for="field_email">{{'email' | message}}</label>
                            <input id="field_email" name="fieldEmail" type="email" ng-model="registerForm.data.email">

                            <label for="field_affiliation">{{'affiliation' | message}}</label>
                            <input id="field_affiliation" name="fieldAffiliation" type="text" ng-model="registerForm.data.affiliation" ng-minlength="3">

                            <button class="second" type="submit" ng-disabled="!registerForm.ready()" ng-click="registerForm.proceed(registerForm)">{{'register.continue' | message}}</button>
                            <button class="first" type="reset">{{'reset' | message}}</button>
                        </form>
                    </wizard-step>

                    <wizard-step id="register_agreement">
                        <div class="register_agreement_pages">
                            <div class="register_agreement_page" ng-bind-html="agreement.pages[agreement.current - 1]" scroll="scroll($scroll)"></div>
                        </div>

                        <p ng-bind-html="'register.agreement.instructions' | message"></p>

                        <button class="second" ng-click="proceed()" ng-show="agreement.current >= agreement.total" ng-disabled="!ready()">{{'register.register' | message}}</button>

                        <button class="second" ng-click="next()" ng-show="agreement.current < agreement.total" ng-disabled="!ready()">{{'register.agree' | message}}</button>
                        <button class="third" ng-click="back()" ng-show="agreement.current > 1">Back</button>
                    </wizard-step>

                    <wizard-step id="register_email">
			            <p ng-bind-html="'register.sent.instructions' | message:'<strong>'+registerForm.data.email+'</strong>'"></p>
                    </wizard-step>

                    <wizard-step id="register_password">
                        <form name="passwordForm">
			                <label for="field_password_once">{{'password' | message}}</label>
                            <input id="field_password_once" type="password" ng-model="passwordForm.data.password.once">

			                <label for="field_password_again">{{'password' | message}} (again)</label>
                            <input id="field_password_again" type="password" ng-model="passwordForm.data.password.again">

                            <button class="second" type="submit" ng-disabled="!passwordForm.ready()" ng-click="passwordForm.proceed()">{{'register.continue' | message}}</button>
                            <button class="first" type="reset">{{'reset' | message}}</button>
                        </form>
                    </wizard-step>

                    <wizard-step id="register_agent">
                        <auth-search-form></auth-search-form>
                    </wizard-step>

                    <wizard-step id="register_request">
                        <div ng-hide="ifInfo()">
                            <auth-apply-form></auth-apply-form>
                        </div>

                        <div ng-show="ifInfo()">
                            <p ng-bind-html="'register.notfound.instructions' | message"></p>

                            <form name="infoForm">
                                <textarea id="field_info" ng-model="infoForm.data.info"></textarea>

                                <button class="second" type="submit" ng-disabled="!infoForm.ready()" ng-click="infoForm.proceed()">{{'register.continue' | message}}</button>
                                <button ng-click="infoForm.cancel()" class="first">{{"cancel" | message}}</button>
                            </form>
                        </div>
                    </wizard-step>

                    <wizard-step id="register_pending"></wizard-step>
                </wizard>
            </div>
        </div>
</panel>

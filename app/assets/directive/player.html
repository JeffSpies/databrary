<section class="player" bindonce>
  <div class="player-main" ng-repeat="media in player.main track by media.asset.id">
    <div class="player-main-media" ng-switch="page.types.assetMimeArray(media)[0]">
      <div ng-switch-when="image">
	<img bo-src="page.router.assetLink(media, true)">
      </div>

      <div ng-switch-when="video">
	<video bo-if="page.display.videoSupported()" controls>
	  <source bo-src="page.router.assetLink(media, true)" bo-attr bo-attr-type="page.types.assetFormat(media).mimetype">
	</video>
      </div>
    </div>

    <div class="player-main-info" bo-class="{always: !player.isPlayable(media)}">
      <h1 class="player-main-info-name">
        <span class="filetype">
          <img bo-src="page.types.assetIcon(media)" hint="format-{{page.types.assetFormat(media).extension}}">
        </span>

	<span class="filename" bo-text="page.types.assetDisplayName(media)"></span>
      </h1>

      <div class="player-main-info-support" bo-if="!page.display.videoSupported()" bo-html="'video.unsupported' | message"></div>

      <dl class="player-main-info-list">
	<dt>Classification</dt>
	<dd>
	  <span class="classification icon" bo-class="page.constants.data.classification[media.asset.classification].toLowerCase()" hint="classification-{{page.constants.data.classification[media.asset.classification]}}"></span>&nbsp;<span bo-html="page.constants.data.classification[media.asset.classification]"></span>
	</dd>

	<dt>File Type</dt>
	<dd bo-text="page.types.assetFormat(media).name"></dd>

	<dt>Mime Type</dt>
	<dd bo-text="page.types.assetFormat(media).mimetype"></dd>

	<dt bo-if="media.asset.duration">Duration</dt>
	<dd bo-if="media.asset.duration" bo-text="media.asset.duration | timecode"></dd>

      </dl>

      <a bo-href="page.router.assetLink(media, true)" target="_self" ng-if="page.auth.hasAccess('READ', media)" class="player-main-info-link">download</a>&nbsp;
      <a bo-href="page.router.assetEdit(media)" target="_self" ng-if="page.auth.hasAccess('CONTRIBUTE', media)" class="player-main-info-link">edit</a>
    </div>
  </div>

  <div class="player-resize player-resize-main" ng-mousedown="player.resize($event)">
    <div class="player-resize-grip"></div>
  </div>

  <div class="player-list">
    <div class="player-list-scroll player-list-scroll-left" ng-click="player.listScroll(false)" ng-show="player.canScrollBack">
      <div class="player-list-scroll-arrow"></div>
    </div>

    <div class="player-list-scroll player-list-scroll-right" ng-click="player.listScroll(true)" ng-show="player.canScrollForward">
      <div class="player-list-scroll-arrow"></div>
    </div>

    <div class="player-list-inner">
      <ul class="player-list-items flat cf">
	<li class="player-list-item player-list-item-playable" ng-repeat="media in player.playable">
	  <img bo-src="page.router.assetThumb(media)" ng-click="player.select(media)">
	</li>

	<li class="player-list-item player-list-item-unplayable" ng-repeat="list in player.unplayableList">
	  <ul class="player-unplayable-items flat">
	    <li class="player-unplayable-item" ng-repeat="media in list">
	      <a ng-click="player.select(media)"><img class="icon" bo-src="page.types.assetIcon(media)" hint="format-{{page.types.assetFormat(media).extension}}"><span bo-text="page.types.assetDisplayName(media)"></span></a>
	    </li>
	  </ul>
	</li>
      </ul>
    </div>
  </div>
</section>
